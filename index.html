<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATRI-BOT Verify</title>
    <script src="./captcha.js"></script>
    <style>
        body{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background:#f0f0f0}
        .container{text-align:center;background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.1)}
        button{background:#4CAF50;color:#fff;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:4px;transition:background .3s}
        button:hover{background:#45a049}
    </style>
</head>
<body>
<div class="container">
    <h1>ATRI-BOT Verify</h1>
    <button onclick="verify()">Verify</button>
</div>
<script>
    function verify(){
        let params = new URLSearchParams(window.location.search);
        let qq = params.get('qq');
        if(!qq){
            alert('不合法的URL打开');
            return;
        }
        qq = atob(qq);

        grecaptcha.ready(function() {
            grecaptcha.execute('6LdWX1cqAAAAABF5V15pI1ZoLa4gMSnh0kCAP01d', {action: 'verify'}).then(function(token) {
                fetch(`https://api.atri.meownya.asia/api/verify?qq=${encodeURIComponent(qq)}&token=${token}`)
                    .then(response => response.json())
                    .then(data => {
                        alert(data.message || '验证成功');
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Verification failed');
                    });
            });
        });
    }
</script>
</body>
</html>